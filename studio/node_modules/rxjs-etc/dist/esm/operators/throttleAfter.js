import { concat, of, } from "rxjs";
import { concatMap, delay, distinctUntilChanged, filter, publish, startWith, switchMap, take, takeUntil, } from "rxjs/operators";
export function throttleAfter(notifier, duration, scheduler) {
    return (source) => source.pipe(publish((sharedSource) => notifier.pipe(switchMap(() => concat(of(true), delay(duration, scheduler)(of(false)))), startWith(false), distinctUntilChanged(), publish((sharedSignal) => sharedSignal.pipe(concatMap((signalled) => signalled
        ? sharedSource.pipe(take(1), takeUntil(sharedSignal.pipe(filter((signalled) => !signalled))))
        : sharedSource.pipe(takeUntil(sharedSignal.pipe(filter((signalled) => signalled))))))))));
}
//# sourceMappingURL=throttleAfter.js.map