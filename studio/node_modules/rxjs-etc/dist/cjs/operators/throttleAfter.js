"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.throttleAfter = void 0;
const rxjs_1 = require("rxjs");
const operators_1 = require("rxjs/operators");
function throttleAfter(notifier, duration, scheduler) {
    return (source) => source.pipe(operators_1.publish((sharedSource) => notifier.pipe(operators_1.switchMap(() => rxjs_1.concat(rxjs_1.of(true), operators_1.delay(duration, scheduler)(rxjs_1.of(false)))), operators_1.startWith(false), operators_1.distinctUntilChanged(), operators_1.publish((sharedSignal) => sharedSignal.pipe(operators_1.concatMap((signalled) => signalled
        ? sharedSource.pipe(operators_1.take(1), operators_1.takeUntil(sharedSignal.pipe(operators_1.filter((signalled) => !signalled))))
        : sharedSource.pipe(operators_1.takeUntil(sharedSignal.pipe(operators_1.filter((signalled) => signalled))))))))));
}
exports.throttleAfter = throttleAfter;
//# sourceMappingURL=throttleAfter.js.map