"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.debounceAfter = void 0;
const rxjs_1 = require("rxjs");
const operators_1 = require("rxjs/operators");
function debounceAfter(notifier, duration, scheduler) {
    return (source) => source.pipe(operators_1.publish((sharedSource) => notifier.pipe(operators_1.switchMap(() => rxjs_1.concat(rxjs_1.of(true), rxjs_1.of(false).pipe(operators_1.delay(duration, scheduler)))), operators_1.startWith(false), operators_1.distinctUntilChanged(), operators_1.publish((sharedSignal) => sharedSignal.pipe(operators_1.concatMap((signalled) => signalled
        ? sharedSource.pipe(operators_1.takeUntil(sharedSignal.pipe(operators_1.filter((signalled) => !signalled))), operators_1.takeLast(1))
        : sharedSource.pipe(operators_1.takeUntil(sharedSignal.pipe(operators_1.filter((signalled) => signalled))))))))));
}
exports.debounceAfter = debounceAfter;
//# sourceMappingURL=debounceAfter.js.map