"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.getVersionedClient = exports.versionedClient = void 0;

var _client = _interopRequireDefault(require("part:@sanity/base/client"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

// @todo: remove the following line when part imports has been removed from this file
///<reference types="@sanity/types/parts" />

/**
 * @internal INTERNAL! Don't use outside of @sanity/base!
 *
 * Preconfigured, versioned client used for all the
 * internal tooling within @sanity/base.
 */

/**
 * Only for use inside of @sanity/base
 * Don't import this from external modules.
 *
 * @internal
 */
var versionedClient = _client.default.withConfig({
  /**
   * NOTE: CHANGING THIS VERSION MEANS YOU'LL HAVE TO TEST
   * EVERYTHING THAT DEPENDS ON THIS VERSIONED CLIENT WITHIN
   * @sanity/base!
   */
  apiVersion: '1'
});
/**
 * Only for use inside of @sanity/base
 * Don't import this from external modules.
 *
 * Gets a client configured with the passed API version,
 * re-using clients where possible
 *
 * @internal
 */


exports.versionedClient = versionedClient;

var getVersionedClient = (() => {
  var clientMap = new Map();
  return function getVersionedSanityClient(version) {
    var apiVersion = version || '1';

    if (!clientMap.has(apiVersion)) {
      clientMap.set(apiVersion, _client.default.withConfig({
        apiVersion
      }));
    }

    return clientMap.get(apiVersion);
  };
})();

exports.getVersionedClient = getVersionedClient;