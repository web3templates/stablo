{
  "version": 3,
  "sources": ["../../../../src/primitives/textInput/textInput.tsx"],
  "sourcesContent": ["import {CloseIcon} from '@sanity/icons'\nimport React, {createElement, forwardRef, isValidElement, useCallback, useMemo} from 'react'\nimport {isValidElementType} from 'react-is'\nimport styled from 'styled-components'\nimport {EMPTY_RECORD} from '../../constants'\nimport {useForwardedRef, useCustomValidity, useResponsiveProp} from '../../hooks'\nimport {\n  responsiveRadiusStyle,\n  ResponsiveRadiusStyleProps,\n  responsiveInputPaddingStyle,\n  TextInputInputStyleProps,\n  TextInputRepresentationStyleProps,\n  TextInputResponsivePaddingStyleProps,\n  textInputBaseStyle,\n  textInputFontSizeStyle,\n  textInputRepresentationStyle,\n  textInputRootStyle,\n} from '../../styles/internal'\nimport {ThemeFontWeightKey} from '../../theme'\nimport {Box} from '../box'\nimport {Button, ButtonProps} from '../button'\nimport {Card} from '../card'\nimport {Text} from '../text'\n\n/**\n * @public\n */\nexport type TextInputClearButtonProps = Omit<ButtonProps, 'as'> &\n  Omit<React.HTMLProps<HTMLButtonElement>, 'as' | 'onClick' | 'onMouseDown' | 'ref'>\n\n/**\n * @public\n */\nexport type TextInputType =\n  | 'date'\n  | 'datetime-local'\n  | 'email'\n  | 'url'\n  | 'month'\n  | 'number'\n  | 'password'\n  | 'tel'\n  | 'time'\n  | 'text'\n  | 'week'\n\n/**\n * @public\n */\nexport interface TextInputProps {\n  border?: boolean\n  /**\n   * @beta\n   */\n  clearButton?: boolean | TextInputClearButtonProps\n  customValidity?: string\n  fontSize?: number | number[]\n  icon?: React.ComponentType | React.ReactNode\n  iconRight?: React.ComponentType | React.ReactNode\n  /**\n   * @beta\n   */\n  onClear?: () => void\n  padding?: number | number[]\n  prefix?: React.ReactNode\n  radius?: number | number[]\n  space?: number | number[]\n  suffix?: React.ReactNode\n  type?: TextInputType\n  weight?: ThemeFontWeightKey\n}\n\nconst CLEAR_BUTTON_BOX_STYLE: React.CSSProperties = {zIndex: 2}\n\nconst Root = styled.span(textInputRootStyle)\n\nconst InputRoot = styled.span`\n  flex: 1;\n  min-width: 0;\n  display: block;\n  position: relative;\n`\n\nconst Prefix = styled(Card).attrs({forwardedAs: 'span'})`\n  border-top-right-radius: 0;\n  border-bottom-right-radius: 0;\n\n  & > span {\n    display: block;\n    margin: -1px;\n  }\n`\n\nconst Suffix = styled(Card).attrs({forwardedAs: 'span'})`\n  border-top-left-radius: 0;\n  border-bottom-left-radius: 0;\n\n  & > span {\n    display: block;\n    margin: -1px;\n  }\n`\n\nconst Input = styled.input<TextInputResponsivePaddingStyleProps & TextInputInputStyleProps>(\n  responsiveInputPaddingStyle,\n  textInputBaseStyle,\n  textInputFontSizeStyle\n)\n\nconst Presentation = styled.span<ResponsiveRadiusStyleProps & TextInputRepresentationStyleProps>(\n  responsiveRadiusStyle,\n  textInputRepresentationStyle\n)\n\nconst LeftBox = styled(Box)`\n  position: absolute;\n  top: 0;\n  left: 0;\n`\n\nconst RightCard = styled(Card)`\n  background-color: transparent;\n  position: absolute;\n  top: 0;\n  right: 0;\n`\n\n/**\n * @public\n */\nexport const TextInput = forwardRef(function TextInput(\n  props: TextInputProps & Omit<React.HTMLProps<HTMLInputElement>, 'as' | 'prefix' | 'type'>,\n  forwardedRef: React.Ref<HTMLInputElement>\n) {\n  const {\n    border = true,\n    clearButton,\n    disabled = false,\n    fontSize = 2,\n    icon,\n    iconRight,\n    onClear,\n    padding: paddingProp = 3,\n    prefix,\n    radius: radiusProp = 1,\n    readOnly,\n    space = 3,\n    suffix,\n    customValidity,\n    type = 'text',\n    ...restProps\n  } = props\n\n  const ref = useForwardedRef(forwardedRef)\n  const padding = useResponsiveProp(paddingProp)\n  const radius = useResponsiveProp(radiusProp)\n\n  // Transient properties\n  const $hasClearButton = Boolean(clearButton)\n  const $hasIcon = Boolean(icon)\n  const $hasIconRight = Boolean(iconRight)\n  const $hasSuffix = Boolean(suffix)\n  const $hasPrefix = Boolean(prefix)\n\n  useCustomValidity(ref, customValidity)\n\n  // Prevent the clear button from taking the focus away from the input\n  const handleClearMouseDown = useCallback((event: React.MouseEvent<HTMLButtonElement>) => {\n    event.preventDefault()\n    event.stopPropagation()\n  }, [])\n\n  const handleClearClick = useCallback(\n    (event: React.MouseEvent<HTMLButtonElement>) => {\n      event.preventDefault()\n      event.stopPropagation()\n\n      if (onClear) onClear()\n\n      // Focus the input, in case focus has been lost when clicking the clear button\n      ref.current?.focus()\n    },\n    [onClear, ref]\n  )\n\n  // Render prefix (memoized)\n  const prefixNode = useMemo(\n    () =>\n      prefix && (\n        <Prefix borderTop borderLeft borderBottom radius={radius} sizing=\"border\" tone=\"inherit\">\n          <span>{prefix}</span>\n        </Prefix>\n      ),\n    [prefix, radius]\n  )\n\n  // Render presentation (memoized)\n  const presentationNode = useMemo(\n    () => (\n      <Presentation\n        $border={border}\n        $hasPrefix={$hasPrefix}\n        $hasSuffix={$hasSuffix}\n        $radius={radius}\n      >\n        {icon && (\n          <LeftBox padding={padding}>\n            <Text size={fontSize}>\n              {isValidElement(icon) && icon}\n              {isValidElementType(icon) && createElement(icon)}\n            </Text>\n          </LeftBox>\n        )}\n\n        {!$hasClearButton && iconRight && (\n          <RightCard padding={padding}>\n            <Text size={fontSize}>\n              {isValidElement(iconRight) && iconRight}\n              {isValidElementType(iconRight) && createElement(iconRight)}\n            </Text>\n          </RightCard>\n        )}\n      </Presentation>\n    ),\n    [border, fontSize, icon, iconRight, padding, radius, $hasClearButton, $hasPrefix, $hasSuffix]\n  )\n\n  // Render clear button (memoized)\n  const clearButtonBoxPadding = useMemo(() => padding.map((v) => v - 2), [padding])\n  const clearButtonPadding = useMemo(() => padding.map((v) => v - 1), [padding])\n  const clearButtonProps: TextInputClearButtonProps = useMemo(\n    () => (typeof clearButton === 'object' ? clearButton : EMPTY_RECORD),\n    [clearButton]\n  )\n  const clearButtonNode = useMemo(\n    () =>\n      !disabled &&\n      !readOnly &&\n      clearButton && (\n        <RightCard\n          forwardedAs=\"span\"\n          padding={clearButtonBoxPadding}\n          style={CLEAR_BUTTON_BOX_STYLE}\n          tone={customValidity ? 'critical' : 'inherit'}\n        >\n          <Button\n            data-qa=\"clear-button\"\n            fontSize={fontSize}\n            icon={CloseIcon}\n            mode=\"bleed\"\n            padding={clearButtonPadding}\n            radius={radius.map((r) => r - 1)}\n            {...clearButtonProps}\n            onClick={handleClearClick}\n            onMouseDown={handleClearMouseDown}\n          />\n        </RightCard>\n      ),\n    [\n      clearButton,\n      clearButtonBoxPadding,\n      clearButtonPadding,\n      clearButtonProps,\n      customValidity,\n      disabled,\n      fontSize,\n      handleClearClick,\n      handleClearMouseDown,\n      radius,\n      readOnly,\n    ]\n  )\n\n  // Render suffix (memoized)\n  const suffixNode = useMemo(\n    () =>\n      suffix && (\n        <Suffix borderTop borderRight borderBottom radius={radius} sizing=\"border\" tone=\"inherit\">\n          <span>{suffix}</span>\n        </Suffix>\n      ),\n    [radius, suffix]\n  )\n\n  return (\n    <Root data-ui=\"TextInput\">\n      {prefixNode}\n      <InputRoot>\n        <Input\n          data-as=\"input\"\n          {...restProps}\n          $iconLeft={$hasIcon}\n          $iconRight={$hasIconRight || $hasClearButton}\n          $padding={padding}\n          $space={space}\n          $fontSize={fontSize}\n          disabled={disabled}\n          readOnly={readOnly}\n          ref={ref}\n          type={type}\n        />\n        {presentationNode}\n        {clearButtonNode}\n      </InputRoot>\n      {suffixNode}\n    </Root>\n  )\n})\n"],
  "mappings": "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",
  "names": []
}
