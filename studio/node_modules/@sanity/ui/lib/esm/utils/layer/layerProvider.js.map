{
  "version": 3,
  "sources": ["../../../../src/utils/layer/layerProvider.tsx"],
  "sourcesContent": ["import React, {useCallback, useContext, useEffect, useMemo, useState} from 'react'\nimport {useMediaIndex, useResponsiveProp} from '../../hooks'\nimport {LayerContext} from './layerContext'\nimport {LayerContextValue} from './types'\n\n/**\n * @public\n */\nexport interface LayerProviderProps {\n  children?: React.ReactNode\n  zOffset?: number | number[]\n}\n\n/**\n * @public\n */\nexport function LayerProvider(props: LayerProviderProps): React.ReactElement {\n  const {children, zOffset: zOffsetProp = 0} = props\n  const parent = useContext(LayerContext)\n  const zOffset = useResponsiveProp(zOffsetProp)\n  const maxMediaIndex = zOffset.length - 1\n  const mediaIndex = Math.min(useMediaIndex(), maxMediaIndex)\n  const zIndex = parent ? parent.zIndex + zOffset[mediaIndex] : zOffset[mediaIndex]\n  const [size, setSize] = useState(0)\n\n  const registerChild = useCallback(() => {\n    setSize((v) => v + 1)\n\n    return () => setSize((v) => v - 1)\n  }, [])\n\n  const parentRegisterChild = parent?.registerChild\n\n  useEffect(() => {\n    if (!parentRegisterChild) return\n\n    return parentRegisterChild()\n  }, [parentRegisterChild])\n\n  const value: LayerContextValue = useMemo(\n    () => ({version: 0.0, isTopLayer: size === 0, registerChild, size, zIndex}),\n    [size, registerChild, zIndex]\n  )\n\n  return <LayerContext.Provider value={value}>{children}</LayerContext.Provider>\n}\n"],
  "mappings": "AAAA;AACA;AACA;AAcO,uBAAuB,OAA+C;AAC3E,QAAM,EAAC,UAAU,SAAS,cAAc,MAAK;AAC7C,QAAM,SAAS,WAAW;AAC1B,QAAM,UAAU,kBAAkB;AAClC,QAAM,gBAAgB,QAAQ,SAAS;AACvC,QAAM,aAAa,KAAK,IAAI,iBAAiB;AAC7C,QAAM,SAAS,SAAS,OAAO,SAAS,QAAQ,cAAc,QAAQ;AACtE,QAAM,CAAC,MAAM,WAAW,SAAS;AAEjC,QAAM,gBAAgB,YAAY,MAAM;AACtC,YAAQ,CAAC,MAAM,IAAI;AAEnB,WAAO,MAAM,QAAQ,CAAC,MAAM,IAAI;AAAA,KAC/B;AAEH,QAAM,sBAAsB,iCAAQ;AAEpC,YAAU,MAAM;AACd,QAAI,CAAC;AAAqB;AAE1B,WAAO;AAAA,KACN,CAAC;AAEJ,QAAM,QAA2B,QAC/B,MAAO,GAAC,SAAS,GAAK,YAAY,SAAS,GAAG,eAAe,MAAM,WACnE,CAAC,MAAM,eAAe;AAGxB,SAAO,oCAAC,aAAa,UAAd;AAAA,IAAuB;AAAA,KAAe;AAAA;",
  "names": []
}
